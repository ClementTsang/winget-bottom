name: release

on:
  workflow_dispatch:
    inputs:
      version:
        description: "The version to deploy"
        required: true
        type: string

jobs:
  create-release:
    name: "Create Release"
    runs-on: windows-latest
    steps:
      - uses: ClementTsang/winget-releaser@e1d9e728dae067da65723f9ca7f20a4495a69c83
        with:
          identifier: Clement.bottom
          installers-regex: '^bottom_.+_installer\.msi$' # Should catch both x86 and ARM
          version: ${{ github.event.inputs.version }}
          release-tag: ${{ github.event.inputs.version }}
          token: ${{ secrets.WINGET_TOKEN }}
          release-repository: "bottom"
